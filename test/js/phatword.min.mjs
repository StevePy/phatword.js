let s=Object.freeze({t:Symbol("Level1"),i:Symbol("Level2"),h:Symbol("Level3")});class t{#o=[];#l=[];#u=[];#p="";#m="";#L=0;#v=!0;#k=[s.t,s.i,s.h];#g=s.i;#D=null;#S=null;#K=["ShiftLeft","ShiftRight","ControlLeft","ControlRight","AltLeft","AltRight"];#C=["CapsLock","Tab","NumLock"];#R=["Enter","NumpadEnter"];constructor(t,s,i){if(!(t instanceof HTMLInputElement||"text"==t.type&&"password"==t.type))throw new Error("Passwords can only be associated to text or password input controls.");this.#D=t,this.#D.addEventListener("focus",this.clear.bind(this)),this.#D.addEventListener("keydown",this.#$.bind(this)),this.#D.addEventListener("keyup",this.#B.bind(this)),null!=s&&s instanceof HTMLButtonElement&&(this.#S=s),null!=i&&null!=i.sensitivity&&this.N(i.sensitivity),null!=i&&null!=i.recordEnter&&this.T(i.recordEnter)}U(){return this.#g}N(t){this.#k.includes(t)&&(this.#g=t)}A(){return this.#v}T(t){null!=t&&"boolean"==typeof t&&(this.#v=t)}clear(){this.#l=[],this.#o=[],this.#u=[]}#$(t){t.isComposing||this.#H(t)||this.#R.includes(t.code)&&!this.#v||(this.#K.includes(t.code)||this.#g==s.h?this.#l.push("[Down]"+this.#I(t)):this.#g==s.i&&this.#o.push(t))}#B(t){t.isComposing||this.#H(t)||(("Backspace"==t.code||"Delete"==t.code||t.getModifierState&&!t.getModifierState("NumLock")&&"NumpadDecimal"==t.code)&&""===this.#D.value?this.clear():(this.#R.includes(t.code),this.#R.includes(t.code)&&!this.#v||(this.#u.push(Date.now()),this.#K.includes(t.code)||this.#g!=s.i?(0<this.#o.length&&(this.#l=this.#l.concat(this.#o.map(t=>`[Down]${this.#I(t)}[Up]`+this.#I(t))),this.#o=[]),this.#l.push("[Up]"+this.#I(t))):0<this.#o.length&&this.#o.slice(-1)[0].code==t.code&&(this.#l=this.#l.concat(this.#o.map(t=>`[Down]${this.#I(t)}[Up]`+this.#I(t))),this.#o=[]),this.#p=this.#D.value,this.#m=this.#l.join("")),this.#R.includes(t.code)&&null!=this.#S&&this.#S.click()))}#H(t){return!!(t.isComposing||this.#C.includes(t.code)||t.repeat&&this.#K.includes(t.code)||this.#g==s.t&&this.#K.includes(t.code))}#I(t){return`[${t.code}${t.shiftKey?"+S":""}${t.getModifierState&&t.getModifierState("CapsLock")?"+C":""}]`}time(){return 0==this.#L&&this.#M(),this.#L}value(){return this.#M(),0==this.#l.length?"":(this.clear(),""+this.#p+this.#m)}#M(){if(0==this.#u.length)return 0;var t=this.#u[0],s=this.#u.slice(-1)[0];this.#L=s-t}}export{s as Sensitivity,t as Password};